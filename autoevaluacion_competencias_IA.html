<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Autoevaluación de Competencias Docentes para la IA — versión tablas</title>
<style>
  :root {
    --bg:#ffffff; --fg:#0f172a; --muted:#475569; --card:#f8fafc; --border:#e2e8f0;
    --accent:#2563eb; --accent-2:#0ea5e9; --focus:#9333ea;
  }
  [data-theme="dark"] {
    --bg:#0b1220; --fg:#e5e7eb; --muted:#9ca3af; --card:#111827; --border:#1f2937;
    --accent:#60a5fa; --accent-2:#22d3ee;
  }
  html, body { height:100%; }
  body { margin:0; background:var(--bg); color:var(--fg); font-family: system-ui, Segoe UI, Roboto, Arial; }
  .container { max-width: 1100px; margin: 0 auto; padding: 1rem; }
  header { position: sticky; top: 0; z-index: 10; background:var(--bg); border-bottom:1px solid var(--border); }
  .bar { display:flex; justify-content:space-between; align-items:center; gap:.75rem; padding:.75rem 0; }
  .title-wrap h1 { margin:0; font-size: clamp(1.25rem, 1.2rem + 1vw, 2rem); }
  .subtitle { margin:.25rem 0 0 0; color: var(--muted); font-size: .98rem; max-width: 60ch; }
  .btn { border:1px solid var(--border); background: var(--card); color:var(--fg); padding:.6rem .9rem; border-radius:.8rem; cursor:pointer; }
  .btn.primary { background: linear-gradient(180deg, var(--accent), var(--accent-2)); color:#fff; border:none; }
  .note { color:var(--muted); }
  .comp { border:1px solid var(--border); border-radius:12px; background:var(--card); padding:12px; margin:16px 0; }
  .legend { margin-bottom:.5rem; color:var(--muted); font-size:.95rem; }
  table.rubrica { width:100%; border-collapse: collapse; }
  table.rubrica th, table.rubrica td { border:1px solid var(--border); padding:.6rem; vertical-align:top; }
  table.rubrica th.nivel { width:120px; background:rgba(37,99,235,.08); }
  .desc { margin-bottom:.4rem; }
  .likert { display:flex; gap:.45rem; flex-wrap:wrap; }
  .likert label { display:inline-flex; align-items:center; gap:.25rem; font-size:.95rem; }
  .callout { border-left:4px solid var(--accent); background: rgba(37,99,235,.08); padding:.6rem .75rem; border-radius:.5rem; }
  .actions-results { display:flex; gap:.5rem; flex-wrap: wrap; margin: .75rem 0 0 0; }
  .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
</style>
</head>
<body>

<header>
  <div class="container bar" role="banner">
    <div class="title-wrap">
      <h1>Autoevaluación de Competencias Docentes para la IA</h1>
      <p class="subtitle">Calcula tu nivel de competencias digitales necesarias para integrar la IA en tus clases</p>
    </div>
    <button id="themeToggle" class="btn" aria-pressed="false" aria-label="Cambiar tema Día/Noche">Cambiar tema</button>
  </div>
</header>

<main class="container">
  <section class="callout">
    Seleccione para cada descriptor el valor de frecuencia que más se ajuste a su práctica. Para calcular se requiere que todos los descriptores estén respondidos.
  </section>

  <div id="root"></div>

  <section id="resultados" aria-labelledby="result-title">
    <h2 id="result-title">Resultados y reporte</h2>
    <div id="results"></div>
    <h3>Reporte copiable</h3>
    <textarea id="report" style="width:100%; min-height:160px;" readonly></textarea>
    <div class="actions-results" role="group" aria-label="Acciones de resultados">
      <button id="calc" class="btn primary" aria-describedby="calcNote">Calcular</button>
      <button id="genReport" class="btn">Generar reporte</button>
      <button id="copyReport" class="btn">Copiar reporte</button>
      <button id="reset" class="btn">Restablecer</button>
    </div>
    <p id="calcNote" class="note">El cálculo se habilita cuando todo está respondido.</p>
  </section>

  <p class="note">Autores: Carlos Bravo Reyes y Mercedes Leticia Sánchez Ambriz. Licencia: CC BY 4.0. Los datos permanecen en su navegador.</p>
</main>

<script>
const RUBRICA = {
  niveles: [
    { id:'inicial', nombre:'Inicial', rango:[1.00, 2.33] },
    { id:'intermedio', nombre:'Intermedio', rango:[2.34, 3.66] },
    { id:'avanzado', nombre:'Avanzado', rango:[3.67, 5.00] }
  ],
  escala: [1,2,3,4,5],
  competencias: [
    {
      nombre: `Alfabetización digital e informacional`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`Realiza búsquedas básicas en internet, sin diferenciar la calidad de las fuentes ni la validez académica.`, `No emplea criterios para la selección de información en la web.`, `No logra distinguir entre fuentes fiables y no fiables, lo que puede conducir a la desinformación.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Accede a bases de datos académicas y valida parcialmente las fuentes encontradas.`, `Formula preguntas a la IA con cierto criterio.`, `Utiliza gestores de referencias bibliográficas de manera elemental.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Integra búsquedas avanzadas en bases de datos.`, `Formula prompts estratégicos, valida con fuentes confiables y organiza la información con rigor académico.`, `Evalúa la credibilidad, relevancia y sesgo de la información generada por la IA.`] }
      ]
    },
    {
      nombre: `Manejo de herramientas digitales y de IA`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`Utiliza las herramientas digitales necesarias como (correo, procesador de texto).`, `Aplica la IA de manera experimental.`, `No logra explorar las funcionalidades de las herramientas digitales para optimizar su práctica docente.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Emplea plataformas digitales de gestión (Moodle, Classroom).`, `Integra la IA en tareas específicas de docencia.`, `Experimenta con herramientas colaborativas en la nube para la gestión de proyectos u otros tipos de trabajo.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Integra de forma sistemática la IA en la planificación, docencia e investigación.`, `Adapta herramientas digitales a las necesidades educativas y científicas.`, `Desarrolla flujos de trabajo automatizados que integran múltiples herramientas digitales y de IA para la eficiencia académica.`] }
      ]
    },
    {
      nombre: `Pensamiento crítico y reflexivo frente a la IA`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`Acepta los resultados de la IA sin cuestionarlos ni validarlos.`, `No encuentra las limitaciones o posibles errores de las respuestas de la IA.`, `Reproduce la información generada por la IA sin un proceso de análisis.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Cuestiona las respuestas de la IA.`, `Contrasta algunos resultados con fuentes académicas.`, `Analiza las respuestas de la IA con una perspectiva de mejora para su práctica docente.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Analiza rigurosamente la información de la IA.`, `Identifica sesgos y limita su impacto en el proceso de enseñanza e investigación.`, `Guía a los estudiantes en el desarrollo de un pensamiento crítico similar ante la información de la IA.`] }
      ]
    },
    {
      nombre: `Ética y uso responsable de la IA`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`No conoce las normas éticas sobre el uso de la IA.`, `No considera la privacidad de los datos al utilizar herramientas de IA.`, `No declara el uso de la IA en trabajos académicos o profesionales.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Aplica parcialmente principios éticos.`, `Cita la IA ocasionalmente y cuida algunos aspectos de privacidad.`, `Muestra una comprensión básica de los riesgos asociados al uso no regulado de la IA.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Aplica sistemáticamente las normas éticas.`, `Declara siempre el uso de la IA, establece políticas de uso responsable y promueve la equidad digital.`, `Participa en debates y formulación de políticas institucionales sobre el uso ético de la IA.`] }
      ]
    },
    {
      nombre: `Diseño didáctico mediado por IA`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`Usa la IA de manera sencilla en actividades sin un diseño pedagógico previo.`, `No vincula el uso de la IA con los objetivos de aprendizaje.`, `Introduce herramientas de IA en el aula de manera aleatoria.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Integra la IA en actividades con cierto propósito educativo.`, `No tiene plena coherencia con los objetivos de aprendizaje.`, `Diseña actividades simples que incorporan la IA como apoyo, pero no como un componente central.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Diseña estrategias didácticas estructuradas donde la IA se integra de manera pedagógicamente pertinente.`, `Alinea la IA con los objetivos de aprendizaje.`, `Crea secuencias didácticas completas donde la IA facilita la personalización del aprendizaje y la evaluación formativa.`] }
      ]
    },
    {
      nombre: `Gestión de la investigación con apoyo de IA`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`Usa la IA solo para tareas simples.`, `No conoce el potencial de la IA para la exploración bibliográfica o el análisis de datos.`, `Limita el uso de la IA a la fase final de la redacción.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Emplea la IA para la revisión bibliográfica, la redacción de borradores o el análisis de datos con supervisión parcial.`, `Aplica herramientas de IA para organizar y sintetizar literatura científica.`, `Requiere supervisión para validar los resultados generados por la IA en la investigación.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Utiliza la IA en todo el proceso investigativo (búsqueda, análisis, redacción, publicación).`, `Mantiene el control humano y el rigor científico.`, `Desarrolla e implementa metodologías de investigación que combinan el análisis humano con las capacidades de la IA.`] }
      ]
    },
    {
      nombre: `Analítica de aprendizaje y mejora profesional`,
      ayuda: ``,
      niveles: [
        { id:'inicial', titulo:'Inicial', descriptores: [`No emplea la IA para analizar datos educativos ni para retroalimentar su práctica docente.`, `Toma decisiones pedagógicas basadas en la intuición en lugar de en datos.`, `No utiliza herramientas digitales para el seguimiento del rendimiento de los estudiantes.`] },
        { id:'intermedio', titulo:'Intermedio', descriptores: [`Analiza algunos datos de rendimiento estudiantil con herramientas digitales.`, `Ajusta parcialmente su docencia.`, `Usa los datos para identificar patrones básicos de rendimiento sin una comprensión profunda de las causas.`] },
        { id:'avanzado', titulo:'Avanzado', descriptores: [`Utiliza la IA para análisis profundos de desempeño estudiantil.`, `Adapta su enseñanza en función de evidencias.`, `Comparte aprendizajes con colegas.`] }
      ]
    }
  ]
};

const $ = (sel, root=document) => root.querySelector(sel);
const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

function setTheme(t){ document.documentElement.setAttribute('data-theme', t); localStorage.setItem('autoeval_tablas_theme', t); $('#themeToggle').setAttribute('aria-pressed', String(t==='dark')); }
function initTheme(){ const t = localStorage.getItem('autoeval_tablas_theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light'); setTheme(t); }
$('#themeToggle')?.addEventListener('click', () => { const t = document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark'; setTheme(t); });

function keyName(compIdx, nivelId, dIdx){ return `c${compIdx}_${nivelId}_d${dIdx}`; }

function render() {
  const root = $('#root');
  root.innerHTML = '';
  RUBRICA.competencias.forEach((c, ci) => {
    const wrap = document.createElement('div'); wrap.className='comp';
    const h = document.createElement('h3'); h.textContent = c.nombre; wrap.appendChild(h);
    const table = document.createElement('table'); table.className='rubrica';
    table.innerHTML = `<thead><tr><th class="nivel">Nivel</th><th>Descriptor 1</th><th>Descriptor 2</th><th>Descriptor 3</th></tr></thead>`;
    const tb = document.createElement('tbody');
    c.niveles.forEach(nv => {
      const tr = document.createElement('tr');
      const th = document.createElement('th'); th.className='nivel'; th.scope='row'; th.textContent = nv.titulo; tr.appendChild(th);
      nv.descriptores.forEach((desc, di) => {
        const td = document.createElement('td');
        const ddiv = document.createElement('div'); ddiv.className = 'desc'; ddiv.textContent = desc; td.appendChild(ddiv);
        const lik = document.createElement('div'); lik.className='likert'; lik.setAttribute('role','group'); lik.setAttribute('aria-label', `${nv.titulo} · Descriptor ${di+1}`);
        RUBRICA.escala.forEach(val => {
          const id = keyName(ci, nv.id, di) + '_' + val;
          const lab = document.createElement('label');
          lab.innerHTML = `<input type="radio" name="${keyName(ci, nv.id, di)}" id="${id}" value="${val}"> ${val}`;
          lik.appendChild(lab);
        });
        td.appendChild(lik);
        tr.appendChild(td);
      });
      tb.appendChild(tr);
    });
    table.appendChild(tb);
    wrap.appendChild(table);
    root.appendChild(wrap);
  });
}

function recoger() {
  const res = [];
  RUBRICA.competencias.forEach((c, ci) => {
    const comp = { nombre: c.nombre, niveles: [] };
    c.niveles.forEach(nv => {
      const vals = [];
      nv.descriptores.forEach((_, di) => {
        const sel = document.querySelector(`input[name="${keyName(ci, nv.id, di)}"]:checked`);
        vals.push(sel ? Number(sel.value) : null);
      });
      comp.niveles.push({ id: nv.id, nombre: nv.titulo, valores: vals });
    });
    res.push(comp);
  });
  return res;
}

function pendiente(res) {
  for(const c of res) {
    for(const n of c.niveles) {
      if(n.valores.some(v => v === null)) return true;
    }
  }
  return false;
}

function promedio(arr){ const vs = arr.filter(v => typeof v === 'number'); return vs.length? vs.reduce((a,b)=>a+b,0)/vs.length : 0; }
function nivelDe(v){ for(const n of RUBRICA.niveles){ if(v>=n.rango[0] && v<=n.rango[1]) return n.nombre; } return RUBRICA.niveles[0].nombre; }
function fmt(n){ return n.toFixed(2); }
function hoyISO(){ const d=new Date(); const p=x=>String(x).padStart(2,'0'); return `${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())}`; }

function calcular(res) {
  const salida = [];
  res.forEach(c => {
    const flat = c.niveles.flatMap(n => n.valores);
    const prom = promedio(flat);
    salida.push({ nombre:c.nombre, promedio: prom, nivel: nivelDe(prom) });
  });
  const global = promedio(salida.map(x=>x.promedio));
  return { porCompetencia: salida, global: global, nivelGlobal: nivelDe(global) };
}

function renderResultados(model){
  const box = $('#results'); box.innerHTML='';
  const tbl = document.createElement('table'); tbl.className='rubrica';
  tbl.innerHTML = `<thead><tr><th>Competencia</th><th>Promedio</th><th>Nivel</th></tr></thead>`;
  const tb = document.createElement('tbody');
  for(const c of model.porCompetencia) {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${c.nombre}</td><td>${fmt(c.promedio)}</td><td>${c.nivel}</td>`;
    tb.appendChild(tr);
  }
  tbl.appendChild(tb); box.appendChild(tbl);
  const p = document.createElement('p'); p.className='callout';
  p.innerHTML = `<strong>Resultado global:</strong> ${fmt(model.global)} — ${model.nivelGlobal}`;
  box.appendChild(p);
}

function generarReporte(model){
  let t = '';
  t += 'Autoevaluación de Competencias Docentes para la IA — versión tablas\n';
  t += `Fecha: ${hoyISO()}\n\n`;
  t += 'Resultados por competencia:\n';
  model.porCompetencia.forEach(c => { t += `- ${c.nombre}: ${fmt(c.promedio)} (${c.nivel})\n`; });
  t += `\nResultado global: ${fmt(model.global)} (${model.nivelGlobal})\n`;
  t += '\nInterpretación: Inicial 1.00–2.33 · Intermedio 2.34–3.66 · Avanzado 3.67–5.00\n';
  t += '\nAutor: Carlos Bravo Reyes. Licencia: CC BY 4.0.\n';
  document.getElementById('report').value = t;
}

function actualizarEstado(){
  const res = recoger();
  const falta = pendiente(res);
  const calc = document.getElementById('calc');
  calc.disabled = falta;
  calc.setAttribute('aria-disabled', String(falta));
}

function attach(){
  document.querySelectorAll('input[type="radio"]').forEach(r => {
    r.addEventListener('change', actualizarEstado);
  });
  document.getElementById('calc').addEventListener('click', () => {
    const res = recoger();
    if(pendiente(res)) { alert('Hay ítems sin responder.'); return; }
    const model = calcular(res);
    renderResultados(model);
  });
  document.getElementById('genReport').addEventListener('click', () => {
    const res = recoger();
    if(pendiente(res)) { alert('Hay ítems sin responder.'); return; }
    const model = calcular(res);
    generarReporte(model);
  });
  document.getElementById('copyReport').addEventListener('click', async () => {
    const t = document.getElementById('report').value;
    try { await navigator.clipboard.writeText(t); alert('Reporte copiado.'); } catch(e) { alert('No se pudo copiar automáticamente. Seleccione y copie el texto.'); }
  });
  document.getElementById('reset').addEventListener('click', () => {
    document.querySelectorAll('input[type="radio"]').forEach(r => r.checked=false);
    document.getElementById('results').innerHTML=''; document.getElementById('report').value=''; actualizarEstado();
  });
}

initTheme();
render();
attach();
actualizarEstado();
</script>
</body>
</html>

